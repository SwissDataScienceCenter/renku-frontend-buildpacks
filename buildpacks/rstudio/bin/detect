#!/usr/bin/env bash
set -eo pipefail

if [[ "${BP_RENKU_FRONTENDS}" =~ "rstudio" ]]; then
  echo "PASS: The BP_RENKU_FRONTENDS environment variable was found to contain rstudio."
else
  echo "SKIPPED:The BP_RENKU_FRONTENDS environment variable is not set or does not contain rstudio."
  exit 100
fi

cat >"${CNB_BUILD_PLAN_PATH}" <<EOL
[[provides]]
  name = "rstudio"

[[requires]]
  name = "renku-env"

[requires.metadata]
  launch = true

[[requires]]
  name = "rstudio"

[requires.metadata]
  launch = true

[[requires]]
  name = "conda"

[requires.metadata]
  build = true
EOL
