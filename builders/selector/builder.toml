description = "Builder for Renku frontends and environments."

[[build.env]]
name = "BP_RENKU_FRONTENDS"
value = "vscodium"

[[buildpacks]]
  uri = "docker://ghcr.io/swissdatasciencecenter/vscodium-buildpack/vscodium:0.5.0"
  id = "vscodium"
  version = "0.5.0"

[[buildpacks]]
  uri = "../../buildpacks/conda-nodefaults"
  version = "0.1.0"

[[buildpacks]]
  uri = "../../buildpacks/kernel-installer"
  version = "0.1.0"

[[buildpacks]]
  uri = "../../buildpacks/jupyterlab"
  version = "0.1.0"

[[buildpacks]]
  uri = "../../buildpacks/ttyd"
  version = "0.1.0"

[[buildpacks]]
  uri = "../../buildpacks/python-dependency-manager"
  version = "0.1.0"

[[buildpacks]]
  uri = "../../buildpacks/rstudio"
  version = "0.1.0"

[[buildpacks]]
  uri = "https://github.com/paketo-buildpacks/tini/releases/download/v0.3.2/tini-0.3.2.cnb"
  version = "0.3.2"

[[buildpacks]]
  uri = "docker://docker.io/paketobuildpacks/python:2.38.0"
  version = "2.38.0"

[[buildpacks]]
  id = "paketo-buildpacks/miniconda"
  uri = "docker://docker.io/paketobuildpacks/miniconda:0.11.5"
  version = "0.11.5"

[lifecycle]
  version = "0.20.6"

[[order]]

  [[order.group]]
    id = "renku/conda-nodefaults"
    optional = true
  [[order.group]]
    id = "paketo-buildpacks/tini"
  [[order.group]]
   id = "paketo-buildpacks/miniconda"
  [[order.group]]
    id = "paketo-buildpacks/python"
  [[order.group]]
    id = "renku/python-dependency-manager"
  [[order.group]]
    id = "renku/jupyterlab"
  [[order.group]]
    id = "renku/kernel-installer"

[[order]]
  [[order.group]]
    id = "renku/conda-nodefaults"
    optional = true
  [[order.group]]
    id = "paketo-buildpacks/tini"
  [[order.group]]
    id = "paketo-buildpacks/python"
  [[order.group]]
    id = "renku/python-dependency-manager"
  [[order.group]]
    id = "renku/ttyd"

[[order]]

  [[order.group]]
    id = "renku/conda-nodefaults"
    optional = true
  [[order.group]]
    id = "paketo-buildpacks/python"
  [[order.group]]
    id = "renku/python-dependency-manager"
  [[order.group]]
    id = "vscodium"

[[order]]

  [[order.group]]
    id = "renku/conda-nodefaults"
    optional = true
  [[order.group]]
    id = "paketo-buildpacks/tini"
  [[order.group]]
   id = "paketo-buildpacks/miniconda"
  [[order.group]]
    id = "renku/rstudio"

[stack]
  build-image = "docker.io/paketobuildpacks/builder-jammy-buildpackless-full:0.0.256"
  id = "io.buildpacks.stacks.jammy"
  run-image = "ghcr.io/swissdatasciencecenter/renku-frontend-buildpacks/base-image:0.1.0"
  run-image-mirrors = []
